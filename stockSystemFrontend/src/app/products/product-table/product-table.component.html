<h1>
    Lista de Productos

</h1>

<div class="actions">
   
    <button mat-raised-button color="primary" (click)="openCreateProductDialog()">Agregar Producto</button>
  <!--Botón para activar la edición masiva -->
    <button mat-raised-button color="accent" (click)="enableMassEdit()">Actualizar en Masa</button>
    <span *ngIf="isEditingEnabled">
    <!-- Botón para finalizar y enviar los cambios -->
    <button mat-raised-button color="primary"  (click)="finalizeEdits()">Finalizar</button>
    </span>
  </div>
  
  <mat-form-field style="width: 50%;">
    <mat-label>Buscar</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="Realiza tu busqueda" #input>
</mat-form-field>
<table mat-table [dataSource]="dataSource" matSort>

    <ng-container matColumnDef="Id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> No. </th>
        <td mat-cell *matCellDef="let element"> {{element.id}} </td>
    </ng-container>

    <ng-container matColumnDef="Nombre">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Nombre </th>
        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
    </ng-container>

    <ng-container matColumnDef="Descripción">
        <th mat-header-cell *matHeaderCellDef> Descripción </th>
        <td mat-cell *matCellDef="let element"> {{element.description}} </td>
    </ng-container>

    <ng-container matColumnDef="Cantidad">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Cantidad</th>
        <td  mat-cell *matCellDef="let element">
            <mat-form-field *ngIf="isEditingEnabled">
          <input matInput  type="number" [(ngModel)]="element.quantity" />
            </mat-form-field>
          <span *ngIf="!isEditingEnabled">{{ element.quantity }}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="Precio">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Precio</th>
        <td  mat-cell *matCellDef="let element">
            <mat-form-field *ngIf="isEditingEnabled">
          <input matInput  type="number" [(ngModel)]="element.price" />
        </mat-form-field>
          <span *ngIf="!isEditingEnabled">{{ element.price }}</span>
        </td>
      </ng-container>


    <ng-container matColumnDef="Creado Por">
        <th mat-header-cell *matHeaderCellDef> Creado Por </th>
        <td mat-cell *matCellDef="let element"> {{element.userUsername}} </td>
    </ng-container>

    <ng-container matColumnDef="Imagen">
        <th mat-header-cell *matHeaderCellDef> Imagen </th>
        <td mat-cell *matCellDef="let element"><img style="margin:2px" width="50px" height="50px"
                src="{{element.image}}"> </td>
    </ng-container>

    <ng-container matColumnDef="Opciones">
        <th mat-header-cell *matHeaderCellDef> </th>
        <td mat-cell *matCellDef="let element"> <button (click)="openEditProductDialog(element)" mat-icon-button class="example-icon"   matTooltip="Editar">
                 
                <mat-icon>edit</mat-icon>
            </button>

            <button mat-icon-button class="example-icon" matTooltip="Eliminar">
                <mat-icon>delete</mat-icon>
            </button>
        </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayColums"></tr>
    <tr mat-row *matRowDef="let row; columns: displayColums;"></tr>

</table>
<mat-paginator [pageSize]="5" [pageSizeOptions]="[1,5, 10, 20]" showFirstLastButtons>
</mat-paginator>

